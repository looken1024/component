## 无状态session和有状态session和JWT

Session通常被用作Web应用程序中存储用户数据的机制。无状态和有状态Session是两种不同的方式来实现Session功能的方法。

#### 无状态(Unified)Session

无状态Session是一种不会持久保存用户会话状态的对象，每次请求结束都会重新创建一个Session对象，因此无状态Session的会话状态是临时的。无状态Session的优势在于降低系统的开销，避免了保存会话状态的复杂性和开销，同时也方便了开发人员的编写。

无状态Session指的是Session数据存储在客户端，而不是存储在服务器端。常见的实现方式是使用Cookie来存储Session ID，并将其他Session数据存储在Cookie中。无状态Session通常需要进行加密和签名，以确保数据的完整性和安全性。

#### 有状态Session

有状态Session指的是Session数据存储在服务器端，而不是存储在客户端。在有状态Session中，客户端和服务器之间的每个请求都需要包含Session ID，以便服务器可以在其本地存储中查找相应的Session数据。

有状态Session则是一种将用户会话状态保存在持久化资源中的对象，例如数据库中。每次请求时，会从持久化资源中获取最新的会话状态，并将会话状态与客户端的Session对象进行关联。有状态Session的优势在于可以提高系统的性能和可靠性，避免了由于会话状态丢失而导致的信息丢失的问题。

下面是无状态Session和有状态Session的一些区别：

存储位置：无状态Session数据存储在客户端，有状态Session数据存储在服务器端。

存储方式：无状态Session数据通常使用加密和签名等方式存储在Cookie中，有状态Session数据存储在服务器本地存储中。

安全性：

无状态Session数据需要进行加密和签名等操作来确保数据的安全性，因为数据存储在客户端。

有状态Session数据存储在服务器端，因此安全性更高。

可伸缩性：

无状态Session数据存储在客户端，因此能够轻松地扩展到多台服务器。

有状态Session数据存储在服务器端，因此需要更多的管理和配置来实现可伸缩性。

无状态Session的优点是性能好，扩展性好；缺点是安全性相对较低，容易受到攻击。有状态Session的优点是安全性高，便于管理和控制；缺点是性能稍差，扩展性不如无状态Session。

选择使用哪种Session方式，应该根据实际应用场景、安全需求和性能要求等因素综合考虑。

总的来说，无状态Session和有状态Session各有优缺点，开发者应根据具体的应用场景和需求选择合适的Session对象。

#### JWT

JWT（JSON Web Token）属于无状态Session的实现方式。JWT是一种开放标准（RFC 7519），是一种加密的字符串，定义了一种紧凑且自包含的方式，用于在各方之间作为JSON对象传输信息。JWT通常用于用户鉴权和授权等场景，用于在不同的系统之间传递身份验证和授权信息。

与传统的有状态Session实现方式不同，JWT不需要在服务器上维护会话状态或在客户端存储Session ID。相反，它们仅使用基于令牌的身份验证，这意味着每个请求都包含一个JWT令牌，而无需在服务器上存储任何信息。服务器可以使用JWT令牌来验证用户的身份并授予它们访问授权。

JWT通常被用于分布式系统或跨域应用的认证和授权场景，因为它不需要在多个系统之间共享Session ID，这使得JWT更具有可扩展性和灵活性。另外，JWT可以通过签名和加密等方式提高安全性，防止篡改和伪造。

需要注意的是，尽管JWT本身是无状态的，但仍然需要注意在实际使用中对于Token的安全性进行保护，比如防止Token泄露等问题。

JWT通常不属于有状态Session，因为JWT是一种独立的安全认证和授权机制，它不需要与有状态Session进行关联。相反，JWT通常是在请求发送方与接收方之间进行交换的，而不是在服务器端进行保存和更新的。

JWT的使用通常需要先进行身份验证，然后颁发JWT，接收方可以使用JWT来验证身份并授权访问相应的资源。因此，JWT可以被视为一种无状态Session，因为它不需要与有状态Session进行关联，而是在请求发送方和接收方之间进行交互。

在使用JWT的场景中，通常情况下不需要将JWT存储在Redis中。这是因为JWT是通过加密和签名等方式来保证其有效性和安全性的，而不需要在服务器端存储任何信息或状态。

在使用JWT进行身份验证时，服务器只需验证JWT的签名和有效期即可确认其有效性，无需查询任何数据库或缓存。JWT通常包含了所有必要的信息，如用户ID、角色、权限等，在进行请求时，客户端会在请求头或请求参数中携带JWT，服务器使用相同的密钥对JWT进行验证，即可确定该用户是否具有访问权限。

然而，在一些特殊的场景中，可能需要将JWT存储在Redis中。例如：

需要将JWT加入黑名单，防止已经失效的JWT被继续使用。

需要撤销某个用户的访问权限，需要强制让其失效。

需要将JWT进行缓存，以减少每次生成JWT的时间消耗。

总的来说，需要将JWT存储在Redis中的情况是比较少见的，通常情况下，JWT是无状态的，无需在服务器端存储任何信息或状态。
